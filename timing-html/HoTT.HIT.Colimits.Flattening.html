<html>
<head>
<title>Flattening.v</title>
<style>
.time {
  background-color: #ffaaaa;
  height: 100%;
  z-index: -1;
  position: absolute;
}
.code {
  z-index: 0;
  position: relative;
  border-style: solid;
  border-color: transparent;
  border-width: 1px;
}
.code:hover {
  border-style: solid;
  border-color: black;
  border-width: 1px;
}
pre {
  margin: 1px;
}
</style>
</head>
<body>
<h1>Timings for Flattening.v</h1>

<div class="code" title="File: Flattening.v
Line: 1
Time: 0.049s">
<div class="time" style="width: 1.2364370426445%"></div>
<pre>Require Import HoTT.Basics HoTT.Types.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 1
Time: 0.186s">
<div class="time" style="width: 4.6934140802422%"></div>
<pre>
Require Import Colimits.Diagram Colimits.Colimit Colimits.Pushout.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 2
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Local Open Scope path_scope.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 3
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** * Flattening lemma *)

(** This file provide a proof of the flattening lemma for colimits. This lemma describes the type [sig E'] when [E' : colimit D -&gt; Type] is a type family defined by recusrion on a colimit. *)
(** The flattening lemma in the case of W-types is presented in section 6.12 of the HoTT book. *)
(** A good intuition is given by the pushout's case (see above). *)

</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 10
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Section Flattening.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 10
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  (** ** Equifibered diagrams *)

 </pre>
</div>
<div class="code" title="File: Flattening.v
Line: 13
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Context `{fs : Funext} {G : graph} (D : diagram G).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 13
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** We define here the graph ∫D, also denoted G·D *)

 </pre>
</div>
<div class="code" title="File: Flattening.v
Line: 17
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition integral : graph.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 17
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 18
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    simple refine (Build_graph _ _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 19
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 20
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact {i : G &amp; D i}.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 20
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 21
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros i j.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 21
Time: 0.001s">
<div class="time" style="width: 0.02523340903356%"></div>
<pre> exact {g : G i.1 j.1 &amp; D _f g i.2 = j.2}.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 21
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 22
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** Then, a dependent diagram E over D is just a diagram over ∫D. *)

 </pre>
</div>
<div class="code" title="File: Flattening.v
Line: 26
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition dep_diagram := diagram integral.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 26
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  Context (E : dep_diagram).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 28
Time: 0.006s">
<div class="time" style="width: 0.15140045420136%"></div>
<pre>

  Let E_f {i j : G} (g : G i j) (x : D i) : E (i; x) -&gt; E (j; (D _f g) x)
      := @diagram1 _ E (i; x) (j; D _f g x) (g; 1).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 31
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** Given a dependent diagram, we can recover a diagram over G by considering the Σ types. *)

 </pre>
</div>
<div class="code" title="File: Flattening.v
Line: 35
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition sigma_diagram : diagram G.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 35
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 36
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    simple refine (Build_diagram _ _ _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 37
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 38
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intro i.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 38
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact {x : D i &amp; E (i; x)}.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 38
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 39
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros i j g x.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 39
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> simpl in *.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 39
Time: 0.001s">
<div class="time" style="width: 0.02523340903356%"></div>
<pre>
      exists (D _f g x.1).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 40
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact (E_f g x.1 x.2).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 40
Time: 0.001s">
<div class="time" style="width: 0.02523340903356%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 41
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** A dependent diagram is said equifibered if all its fibers are equivalences. *)

 </pre>
</div>
<div class="code" title="File: Flattening.v
Line: 45
Time: 0.001s">
<div class="time" style="width: 0.02523340903356%"></div>
<pre>Definition equifibered := forall i j (g : G i j) (x : D i), IsEquiv (E_f g x).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 45
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  Context (H : equifibered) `{Univalence}.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 47
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** Now, given an equifibered diagram and using univalence, one can define a type family [E' : colimit D -&gt; Type] by recusrion on the colimit. *)

 </pre>
</div>
<div class="code" title="File: Flattening.v
Line: 51
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Local Definition E' : colimit D -&gt; Type.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 51
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 52
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply colimit_rec.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 53
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> simple refine (Build_cocone _ _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 53
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    exact (fun i x =&gt; E (i; x)).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 54
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    intros i j g x; cbn.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 55
Time: 0.003s">
<div class="time" style="width: 0.075700227100681%"></div>
<pre> symmetry.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 55
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> eapply path_universe.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 55
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply H.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 56
Time: 0.001s">
<div class="time" style="width: 0.02523340903356%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 57
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** ** Helper lemmas *)

 </pre>
</div>
<div class="code" title="File: Flattening.v
Line: 61
Time: 0.002s">
<div class="time" style="width: 0.050466818067121%"></div>
<pre>Definition transport_E' {i j : G} (g : G i j)  (x : D i) (y : E (i; x))
    : transport E' (colimp i j g x) (E_f g x y) = y.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 62
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 63
Time: 0.001s">
<div class="time" style="width: 0.02523340903356%"></div>
<pre>
    simple refine (transport_idmap_ap _ _ _ _ _ _ @ _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 64
Time: 0.001s">
<div class="time" style="width: 0.02523340903356%"></div>
<pre>
    simple refine (transport2 idmap _ _ @ _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 65
Time: 0.003s">
<div class="time" style="width: 0.075700227100681%"></div>
<pre>
    2: apply colimit_rec_beta_colimp.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 66
Time: 0.001s">
<div class="time" style="width: 0.02523340903356%"></div>
<pre>
    cbn.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 67
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> simple refine (moveR_transport_V idmap _ _ _ _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 67
Time: 0.005s">
<div class="time" style="width: 0.1261670451678%"></div>
<pre>
    symmetry; apply transport_path_universe.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 68
Time: 0.012s">
<div class="time" style="width: 0.30280090840273%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 69
Time: 0.003s">
<div class="time" style="width: 0.075700227100681%"></div>
<pre>

  Definition transport_E'_V {i j : G} (g : G i j)  (x : D i) (y : E (i; x))
    : transport E' (colimp i j g x)^ y = E_f g x y.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 72
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 73
Time: 0.001s">
<div class="time" style="width: 0.02523340903356%"></div>
<pre>
    simple refine (moveR_transport_V E' (colimp i j g x) y _ _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 74
Time: 0.004s">
<div class="time" style="width: 0.10093363613424%"></div>
<pre> symmetry.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 74
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply transport_E'.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 75
Time: 0.003s">
<div class="time" style="width: 0.075700227100681%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 76
Time: 0.009s">
<div class="time" style="width: 0.22710068130204%"></div>
<pre>

  Definition transport_E'_V_E' {i j : G} (g : G i j)  (x : D i) (y : E (i; x))
    : transport_E' g x y
      = ap (transport E' (colimp i j g x)) (transport_E'_V g x y)^
        @ transport_pV E' (colimp i j g x) y.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 81
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 82
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    unfold transport_E'_V.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 83
Time: 0.008s">
<div class="time" style="width: 0.20186727226848%"></div>
<pre>
    rewrite moveR_transport_V_V.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 84
Time: 0.006s">
<div class="time" style="width: 0.15140045420136%"></div>
<pre>
    rewrite inv_V.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 85
Time: 0.007s">
<div class="time" style="width: 0.17663386323492%"></div>
<pre> symmetry.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 85
Time: 0.004s">
<div class="time" style="width: 0.10093363613424%"></div>
<pre>
    apply ap_transport_transport_pV.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 86
Time: 0.029s">
<div class="time" style="width: 0.73176886197325%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 87
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** ** Main result *)

  (** We define the cocone over the sigma diagram to [sig E']. *)

 </pre>
</div>
<div class="code" title="File: Flattening.v
Line: 93
Time: 0.001s">
<div class="time" style="width: 0.02523340903356%"></div>
<pre>Definition cocone_E' : cocone sigma_diagram (sig E').</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 93
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 94
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    simple refine (Build_cocone _ _); cbn.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 95
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    +</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 96
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros i w.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 96
Time: 0.001s">
<div class="time" style="width: 0.02523340903356%"></div>
<pre> exists (colim i w.1); cbn.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 96
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact w.2.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 96
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    +</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 97
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros i j g x; cbn.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 97
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> simple refine (path_sigma' _ _ _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 97
Time: 0.001s">
<div class="time" style="width: 0.02523340903356%"></div>
<pre>
      apply colimp.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 98
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply transport_E'.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 98
Time: 0.004s">
<div class="time" style="width: 0.10093363613424%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 99
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** And we directly prove than it is universal. *)

 </pre>
</div>
<div class="code" title="File: Flattening.v
Line: 103
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Local Opaque path_sigma ap11.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 103
Time: 0.001s">
<div class="time" style="width: 0.02523340903356%"></div>
<pre>

  Definition is_universal_cocone_E' : is_universal cocone_E'.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 105
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 106
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    intro Z.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 107
Time: 0.001s">
<div class="time" style="width: 0.02523340903356%"></div>
<pre> serapply isequiv_adjointify.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 107
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 108
Time: 0.001s">
<div class="time" style="width: 0.02523340903356%"></div>
<pre> intros [q qq].</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 108
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> cbn in *.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 108
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      intros [x y]; revert x y.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 109
Time: 0.002s">
<div class="time" style="width: 0.050466818067121%"></div>
<pre>
      simple refine (colimit_ind _ _ _); cbn.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 110
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      intros i x y; exact (q i (x; y)).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 111
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      intros i j g x; cbn.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 112
Time: 0.001s">
<div class="time" style="width: 0.02523340903356%"></div>
<pre> funext y.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 112
Time: 0.002s">
<div class="time" style="width: 0.050466818067121%"></div>
<pre>
      refine (transport_arrow_toconst _ _ _ @ _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 113
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      refine (_ @ qq i j g (x; y)).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 114
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> cbn.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 114
Time: 0.002s">
<div class="time" style="width: 0.050466818067121%"></div>
<pre> f_ap.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 114
Time: 0.002s">
<div class="time" style="width: 0.050466818067121%"></div>
<pre>
      refine (path_sigma' _ 1 _); cbn.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 115
Time: 0.001s">
<div class="time" style="width: 0.02523340903356%"></div>
<pre> apply transport_E'_V.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 115
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 116
Time: 0.076s">
<div class="time" style="width: 1.9177390865506%"></div>
<pre> intros [q qq].</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 116
Time: 0.001s">
<div class="time" style="width: 0.02523340903356%"></div>
<pre> simple refine (path_cocone _ _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 116
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      +</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 117
Time: 0.001s">
<div class="time" style="width: 0.02523340903356%"></div>
<pre> intros i x; reflexivity.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 117
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      +</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 118
Time: 0.104s">
<div class="time" style="width: 2.6242745394903%"></div>
<pre> intros i j g [x y].</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 118
Time: 0.149s">
<div class="time" style="width: 3.7597779460005%"></div>
<pre>
        rewrite concat_1p, concat_p1.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 119
Time: 0.004s">
<div class="time" style="width: 0.10093363613424%"></div>
<pre> cbn.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 119
Time: 0.065s">
<div class="time" style="width: 1.6401715871814%"></div>
<pre> rewrite ap_path_sigma.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 119
Time: 0.014s">
<div class="time" style="width: 0.35326772646985%"></div>
<pre>
        cbn.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 120
Time: 0.051s">
<div class="time" style="width: 1.2869038607116%"></div>
<pre> rewrite colimit_ind_beta_colimp.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 120
Time: 0.022s">
<div class="time" style="width: 0.55513499873833%"></div>
<pre> rewrite ap10_path_forall.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 120
Time: 0.674s">
<div class="time" style="width: 17.00731768862%"></div>
<pre>
        hott_simpl.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 121
Time: 0.001s">
<div class="time" style="width: 0.02523340903356%"></div>
<pre>
        refine (_ @ concat_1p _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 122
Time: 0.002s">
<div class="time" style="width: 0.050466818067121%"></div>
<pre> refine (_ @@ 1).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 122
Time: 0.005s">
<div class="time" style="width: 0.1261670451678%"></div>
<pre>
        match goal with
        | |- ap _ ?X @ _ = _ =&gt; set X
        end.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 125
Time: 0.001s">
<div class="time" style="width: 0.02523340903356%"></div>
<pre>
        assert (transport_E'_V g x y = p^).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 126
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> {</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 126
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
          subst p.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 127
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> clear.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 127
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> unfold transport_E'_V.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 127
Time: 0.003s">
<div class="time" style="width: 0.075700227100681%"></div>
<pre>
          exact (moveL_transport_V_V E' _ _ _ _)^.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 128
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> }</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 128
Time: 0.009s">
<div class="time" style="width: 0.22710068130204%"></div>
<pre>
        rewrite X.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 129
Time: 0.008s">
<div class="time" style="width: 0.20186727226848%"></div>
<pre> clearbody p.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 129
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> clear.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 129
Time: 0.007s">
<div class="time" style="width: 0.17663386323492%"></div>
<pre> set (E_f g x y) in *.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 129
Time: 0.017s">
<div class="time" style="width: 0.42896795357053%"></div>
<pre>
        clearbody d; destruct p.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 130
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
        reflexivity.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 131
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 132
Time: 0.002s">
<div class="time" style="width: 0.050466818067121%"></div>
<pre> intro f.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 132
Time: 0.021s">
<div class="time" style="width: 0.52990158970477%"></div>
<pre> funext [x y].</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 132
Time: 0.006s">
<div class="time" style="width: 0.15140045420136%"></div>
<pre> revert x y; cbn.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 132
Time: 0.009s">
<div class="time" style="width: 0.22710068130204%"></div>
<pre>
      simple refine (colimit_ind _ _ _); cbn.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 133
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      +</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 134
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> reflexivity.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 134
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      +</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 135
Time: 0.006s">
<div class="time" style="width: 0.15140045420136%"></div>
<pre> intros i j g x; cbn.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 135
Time: 0.004s">
<div class="time" style="width: 0.10093363613424%"></div>
<pre> funext y.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 135
Time: 0.038s">
<div class="time" style="width: 0.9588695432753%"></div>
<pre>
        rewrite transport_forall; cbn.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 136
Time: 0.013s">
<div class="time" style="width: 0.32803431743629%"></div>
<pre>
        rewrite transport_paths_FlFr.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 137
Time: 0.028s">
<div class="time" style="width: 0.70653545293969%"></div>
<pre>
        match goal with
        | |- (_ @ ?pp) @ _ = _ =&gt; set pp
        end.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 140
Time: 0.007s">
<div class="time" style="width: 0.17663386323492%"></div>
<pre> cbn in p.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 140
Time: 0.001s">
<div class="time" style="width: 0.02523340903356%"></div>
<pre>
        assert (p = 1).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 141
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> {</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 141
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
          subst p.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 142
Time: 0.018s">
<div class="time" style="width: 0.45420136260409%"></div>
<pre>
          match goal with
          | |- transportD E' ?C _ _ _ = _ =&gt; set (C2:=C)
          end.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 145
Time: 0.013s">
<div class="time" style="width: 0.32803431743629%"></div>
<pre>
          rewrite (transportD_is_transport _ (fun w =&gt; C2 w.1 w.2)).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 146
Time: 0.01s">
<div class="time" style="width: 0.2523340903356%"></div>
<pre>
          subst C2; cbn.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 147
Time: 0.055s">
<div class="time" style="width: 1.3878374968458%"></div>
<pre> rewrite transport_paths_FlFr.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 147
Time: 0.098s">
<div class="time" style="width: 2.4728740852889%"></div>
<pre>
          rewrite concat_p1.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 148
Time: 0.009s">
<div class="time" style="width: 0.22710068130204%"></div>
<pre> apply moveR_Vp.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 148
Time: 0.018s">
<div class="time" style="width: 0.45420136260409%"></div>
<pre> rewrite concat_p1.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 148
Time: 0.072s">
<div class="time" style="width: 1.8168054504164%"></div>
<pre>
          rewrite ap_path_sigma.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 149
Time: 0.023s">
<div class="time" style="width: 0.58036840777189%"></div>
<pre> cbn.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 149
Time: 0.07s">
<div class="time" style="width: 1.7663386323492%"></div>
<pre>
          rewrite colimit_ind_beta_colimp.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 150
Time: 0.061s">
<div class="time" style="width: 1.5392379510472%"></div>
<pre> rewrite ap10_path_forall.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 150
Time: 2.067s">
<div class="time" style="width: 52.157456472369%"></div>
<pre>
          hott_simpl.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 151
Time: 0.036s">
<div class="time" style="width: 0.90840272520818%"></div>
<pre>
          rewrite ap11_is_ap10_ap01.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 152
Time: 0.017s">
<div class="time" style="width: 0.42896795357053%"></div>
<pre> cbn.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 152
Time: 0.033s">
<div class="time" style="width: 0.83270249810749%"></div>
<pre> rewrite concat_1p.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 152
Time: 0.037s">
<div class="time" style="width: 0.93363613424174%"></div>
<pre>
          rewrite (ap_compose (fun y =&gt; (colim j ((D _f g) x); y)) f).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 153
Time: 0.016s">
<div class="time" style="width: 0.40373454453697%"></div>
<pre> cbn.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 153
Time: 0.05s">
<div class="time" style="width: 1.261670451678%"></div>
<pre>
          rewrite (ap_compose (fun x0 : exists x0 : D j, E (j; x0)
                               =&gt; (colim j (pr1 x0); pr2 x0)) f).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 155
Time: 0.066s">
<div class="time" style="width: 1.665404996215%"></div>
<pre>
          rewrite &lt;- !ap_pp.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 156
Time: 0.006s">
<div class="time" style="width: 0.15140045420136%"></div>
<pre> apply (ap (ap f)).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 156
Time: 0.033s">
<div class="time" style="width: 0.83270249810749%"></div>
<pre>
          match goal with
          | |- _ = (ap ?ff ?pp1 @ ?pp2) @ ?pp3 =&gt; set (p1 := pp1)
          end.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 159
Time: 0.005s">
<div class="time" style="width: 0.1261670451678%"></div>
<pre>
          assert (p1 = ap (transport E' (colimp i j g x)^)
                          (transport_pV E' (colimp i j g x) y)^).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 161
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> {</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 161
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
            subst p1; clear.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 162
Time: 0.016s">
<div class="time" style="width: 0.40373454453697%"></div>
<pre>
            etransitivity.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 163
Time: 0.006s">
<div class="time" style="width: 0.15140045420136%"></div>
<pre> serapply moveL_transport_V_1.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 163
Time: 0.031s">
<div class="time" style="width: 0.78223568004037%"></div>
<pre>
            etransitivity.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 164
Time: 0.002s">
<div class="time" style="width: 0.050466818067121%"></div>
<pre> serapply inverse2.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 164
Time: 0.005s">
<div class="time" style="width: 0.1261670451678%"></div>
<pre> 2: serapply transport_VpV.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 164
Time: 0.017s">
<div class="time" style="width: 0.42896795357053%"></div>
<pre>
            symmetry; apply ap_V.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 165
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> }</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 165
Time: 0.027s">
<div class="time" style="width: 0.68130204390613%"></div>
<pre>
          rewrite X.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 166
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> clear X p1.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 166
Time: 0.03s">
<div class="time" style="width: 0.75700227100681%"></div>
<pre>
          rewrite &lt;- ap_compose.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 167
Time: 0.011s">
<div class="time" style="width: 0.27756749936916%"></div>
<pre> cbn.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 167
Time: 0.045s">
<div class="time" style="width: 1.1355034065102%"></div>
<pre>
          rewrite (ap_path_sigma (fun x =&gt; E (j; x)) (fun x y =&gt; (colim j x; y))).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 168
Time: 0.015s">
<div class="time" style="width: 0.37850113550341%"></div>
<pre>
          cbn.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 169
Time: 0.055s">
<div class="time" style="width: 1.3878374968458%"></div>
<pre> rewrite !concat_p1.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 169
Time: 0.015s">
<div class="time" style="width: 0.37850113550341%"></div>
<pre> rewrite concat_pp_p.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 169
Time: 0.02s">
<div class="time" style="width: 0.50466818067121%"></div>
<pre>
          rewrite ap_V.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 170
Time: 0.006s">
<div class="time" style="width: 0.15140045420136%"></div>
<pre> apply moveL_Vp.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 170
Time: 0.04s">
<div class="time" style="width: 1.0093363613424%"></div>
<pre>
          match goal with
          | |- ?pp1 @ _ = ?pp2 @ _ =&gt; set (p1 := pp1); set (p2 := pp2)
          end.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 173
Time: 0.03s">
<div class="time" style="width: 0.75700227100681%"></div>
<pre> cbn in *.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 173
Time: 0.003s">
<div class="time" style="width: 0.075700227100681%"></div>
<pre>
          assert (p1 = path_sigma' E' 1 (transport_Vp _ _ _)).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 174
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> {</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 174
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
            subst p1.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 175
Time: 0.012s">
<div class="time" style="width: 0.30280090840273%"></div>
<pre> rewrite &lt;- ap_existT.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 175
Time: 0.023s">
<div class="time" style="width: 0.58036840777189%"></div>
<pre>
            rewrite (ap_compose (transport E' (colimp i j g x)^)
                                (fun v =&gt; (colim j ((D _f g) x); v))).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 177
Time: 0.01s">
<div class="time" style="width: 0.2523340903356%"></div>
<pre>
            f_ap.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 178
Time: 0.006s">
<div class="time" style="width: 0.15140045420136%"></div>
<pre> set (colimp i j g x).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 178
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> clear.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 178
Time: 0.011s">
<div class="time" style="width: 0.27756749936916%"></div>
<pre>
            symmetry.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 179
Time: 0.006s">
<div class="time" style="width: 0.15140045420136%"></div>
<pre> apply transport_VpV.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 179
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> }</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 179
Time: 0.02s">
<div class="time" style="width: 0.50466818067121%"></div>
<pre>
          rewrite X; clear p1 X.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 180
Time: 0.011s">
<div class="time" style="width: 0.27756749936916%"></div>
<pre>
          assert (p2 = path_sigma' E' 1 (transport_E'_V _ _ _))
            by reflexivity.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 182
Time: 0.024s">
<div class="time" style="width: 0.60560181680545%"></div>
<pre>
          rewrite X; clear p2 X.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 183
Time: 0.087s">
<div class="time" style="width: 2.1953065859198%"></div>
<pre>
          rewrite &lt;- !path_sigma_pp_pp'.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 184
Time: 0.015s">
<div class="time" style="width: 0.37850113550341%"></div>
<pre> f_ap.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 184
Time: 0.028s">
<div class="time" style="width: 0.70653545293969%"></div>
<pre>
          rewrite concat_p1.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 185
Time: 0.039s">
<div class="time" style="width: 0.98410295230886%"></div>
<pre> rewrite concat_pp_p.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 185
Time: 0.006s">
<div class="time" style="width: 0.15140045420136%"></div>
<pre>
          refine (1 @@ _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 186
Time: 0.006s">
<div class="time" style="width: 0.15140045420136%"></div>
<pre>
          apply moveL_Mp.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 187
Time: 0.021s">
<div class="time" style="width: 0.52990158970477%"></div>
<pre> rewrite &lt;- ap_V.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 187
Time: 0.013s">
<div class="time" style="width: 0.32803431743629%"></div>
<pre> rewrite &lt;- ap_pp.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 187
Time: 0.001s">
<div class="time" style="width: 0.02523340903356%"></div>
<pre>
          simple refine (_ @ _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 188
Time: 0.002s">
<div class="time" style="width: 0.050466818067121%"></div>
<pre> refine (ap (transport E' (colimp i j g x)) _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 188
Time: 0.002s">
<div class="time" style="width: 0.050466818067121%"></div>
<pre>
          refine ((transport_E'_V _ _ _)^ @ _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 189
Time: 0.001s">
<div class="time" style="width: 0.02523340903356%"></div>
<pre>
          refine (ap _ (transport_pV _ _ _)).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 190
Time: 0.009s">
<div class="time" style="width: 0.22710068130204%"></div>
<pre>
          f_ap.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 191
Time: 0.007s">
<div class="time" style="width: 0.17663386323492%"></div>
<pre> refine (1 @@ _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 191
Time: 0.005s">
<div class="time" style="width: 0.1261670451678%"></div>
<pre>
          apply transport_VpV.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 192
Time: 0.025s">
<div class="time" style="width: 0.63083522583901%"></div>
<pre>
          set (transport E' (colimp i j g x) (transport E' (colimp i j g x)^ y)).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 193
Time: 0.007s">
<div class="time" style="width: 0.17663386323492%"></div>
<pre>
          rewrite ap_pp.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 194
Time: 0.013s">
<div class="time" style="width: 0.32803431743629%"></div>
<pre> rewrite &lt;- ap_compose.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 194
Time: 0.006s">
<div class="time" style="width: 0.15140045420136%"></div>
<pre>
          refine (_ @ (transport_E'_V_E' _ _ _)^).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 195
Time: 0.003s">
<div class="time" style="width: 0.075700227100681%"></div>
<pre>
          refine (1 @@ _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 196
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> subst e.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 196
Time: 0.005s">
<div class="time" style="width: 0.1261670451678%"></div>
<pre>
          refine (_ @ (transport_pVp _ _ _)^).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 197
Time: 0.011s">
<div class="time" style="width: 0.27756749936916%"></div>
<pre>
          rewrite ap_compose.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 198
Time: 0.008s">
<div class="time" style="width: 0.20186727226848%"></div>
<pre> f_ap.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 198
Time: 0.011s">
<div class="time" style="width: 0.27756749936916%"></div>
<pre> symmetry.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 198
Time: 0.005s">
<div class="time" style="width: 0.1261670451678%"></div>
<pre>
          apply transport_VpV.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 199
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> }</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 199
Time: 0.628s">
<div class="time" style="width: 15.846580873076%"></div>
<pre>
        rewrite X; hott_simpl.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 200
Time: 3.963s">
<div class="time" style="width: 100%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 201
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** The flattening lemma follows by colimit unicity. *)

 </pre>
</div>
<div class="code" title="File: Flattening.v
Line: 205
Time: 0.001s">
<div class="time" style="width: 0.02523340903356%"></div>
<pre>Definition flattening_lemma : colimit sigma_diagram &lt;~&gt; sig E'.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 205
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 206
Time: 0.002s">
<div class="time" style="width: 0.050466818067121%"></div>
<pre>
    serapply colimit_unicity.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 207
Time: 0.001s">
<div class="time" style="width: 0.02523340903356%"></div>
<pre>
    3: apply is_colimit_colimit.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 208
Time: 0.001s">
<div class="time" style="width: 0.02523340903356%"></div>
<pre>
    serapply Build_is_colimit.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 209
Time: 0.001s">
<div class="time" style="width: 0.02523340903356%"></div>
<pre>
    2: apply is_universal_cocone_E'.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 210
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 211
Time: 1.366s">
<div class="time" style="width: 34.468836739844%"></div>
<pre>
End Flattening.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 212
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>


(** * Pushout case *)

(** We instanciate the flattening lemma in the case of the pushout. *)

</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 218
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Section POCase.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 218
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Context `{Univalence} {A B C} {f: A -&gt; B} {g: A -&gt; C}.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 219
Time: 0.001s">
<div class="time" style="width: 0.02523340903356%"></div>
<pre>

  Context (A0 : A -&gt; Type) (B0 : B -&gt; Type) (C0 : C -&gt; Type)
          (f0 : forall x, A0 x &lt;~&gt; B0 (f x)) (g0 : forall x, A0 x &lt;~&gt; C0 (g x)).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 222
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  Definition POCase_P : PO f g -&gt; Type.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 224
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 225
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    simple refine (PO_rec Type B0 C0 _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 226
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    cbn; intro x.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 227
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> eapply path_universe_uncurried.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 227
Time: 0.001s">
<div class="time" style="width: 0.02523340903356%"></div>
<pre>
    etransitivity.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 228
Time: 0.001s">
<div class="time" style="width: 0.02523340903356%"></div>
<pre> symmetry.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 228
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply f0.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 228
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply g0.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 228
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 229
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  Definition POCase_E : dep_diagram (span f g).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 231
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 232
Time: 0.002s">
<div class="time" style="width: 0.050466818067121%"></div>
<pre>
    simple refine (Build_diagram _ _ _); cbn.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 233
Time: 0.002s">
<div class="time" style="width: 0.050466818067121%"></div>
<pre>
      intros [[] x]; revert x.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 234
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact A0.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 234
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> destruct b; assumption.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 234
Time: 0.106s">
<div class="time" style="width: 2.6747413575574%"></div>
<pre>
      intros [[] x] [[] y] []; cbn; intros [].</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 235
Time: 0.001s">
<div class="time" style="width: 0.02523340903356%"></div>
<pre>
      destruct b; intro p.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 236
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact (fun y =&gt; p # (f0 x y)).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 236
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      exact (fun y =&gt; p # (g0 x y)).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 237
Time: 0.097s">
<div class="time" style="width: 2.4476406762554%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 238
Time: 0.001s">
<div class="time" style="width: 0.02523340903356%"></div>
<pre>

  Definition POCase_HE : equifibered _ POCase_E.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 240
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 241
Time: 0.068s">
<div class="time" style="width: 1.7158718142821%"></div>
<pre>
    intros [] [] [] x; cbn.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 242
Time: 0.005s">
<div class="time" style="width: 0.1261670451678%"></div>
<pre> destruct b; cbn in *.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 242
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply (f0 x).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 243
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply (g0 x).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 243
Time: 0.06s">
<div class="time" style="width: 1.5140045420136%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 244
Time: 0.003s">
<div class="time" style="width: 0.075700227100681%"></div>
<pre>

  Definition PO_flattening
    : PO (functor_sigma f f0) (functor_sigma g g0) &lt;~&gt; exists x, POCase_P x.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 247
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 248
Time: 0.004s">
<div class="time" style="width: 0.10093363613424%"></div>
<pre>
    assert (PO (functor_sigma f f0) (functor_sigma g g0)
            = colimit (sigma_diagram (span f g) POCase_E)).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 250
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> {</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 250
Time: 0.001s">
<div class="time" style="width: 0.02523340903356%"></div>
<pre>
      unfold PO; apply ap.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 251
Time: 0.066s">
<div class="time" style="width: 1.665404996215%"></div>
<pre>
      serapply path_diagram; cbn.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 252
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      -</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 253
Time: 0.003s">
<div class="time" style="width: 0.075700227100681%"></div>
<pre> intros [|[]]; cbn.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 253
Time: 0.001s">
<div class="time" style="width: 0.02523340903356%"></div>
<pre> all: reflexivity.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 253
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      -</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 254
Time: 0.229s">
<div class="time" style="width: 5.7784506686853%"></div>
<pre> intros [] [] [] x; destruct b; cbn in *.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 254
Time: 0.001s">
<div class="time" style="width: 0.02523340903356%"></div>
<pre>
        all: reflexivity.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 255
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> }</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 255
Time: 0.001s">
<div class="time" style="width: 0.02523340903356%"></div>
<pre>
    rewrite X; clear X.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 256
Time: 0.004s">
<div class="time" style="width: 0.10093363613424%"></div>
<pre>
    transitivity (exists x, E' (span f g) POCase_E POCase_HE x).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 257
Time: 0.002s">
<div class="time" style="width: 0.050466818067121%"></div>
<pre>
    apply flattening_lemma.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 258
Time: 0.001s">
<div class="time" style="width: 0.02523340903356%"></div>
<pre>
    apply equiv_functor_sigma_id.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 259
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    intro x.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 260
Time: 0.003s">
<div class="time" style="width: 0.075700227100681%"></div>
<pre>
    assert (E' (span f g) POCase_E POCase_HE x = POCase_P x).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 261
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> {</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 261
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      unfold E', POCase_P, PO_rec.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 262
Time: 0.026s">
<div class="time" style="width: 0.65606863487257%"></div>
<pre>
      f_ap.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 263
Time: 0.005s">
<div class="time" style="width: 0.1261670451678%"></div>
<pre> serapply path_cocone.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 263
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      -</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 264
Time: 0.032s">
<div class="time" style="width: 0.80746908907393%"></div>
<pre> intros [[]|[]] y; cbn.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 264
Time: 0.001s">
<div class="time" style="width: 0.02523340903356%"></div>
<pre>
        apply path_universe_uncurried.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 265
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply g0.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 265
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
        all: reflexivity.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 266
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      -</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 267
Time: 0.586s">
<div class="time" style="width: 14.786777693666%"></div>
<pre> intros [] [] []; cbn.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 267
Time: 0.495s">
<div class="time" style="width: 12.490537471612%"></div>
<pre>
        destruct b, u; intro y; simpl; hott_simpl.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 268
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
        unfold path_universe.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 269
Time: 0.003s">
<div class="time" style="width: 0.075700227100681%"></div>
<pre>
        rewrite &lt;- path_universe_V_uncurried.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 270
Time: 0.003s">
<div class="time" style="width: 0.075700227100681%"></div>
<pre>
        refine (path_universe_compose (f0 y)^-1 (g0 y))^.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 271
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> }</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 271
Time: 0.001s">
<div class="time" style="width: 0.02523340903356%"></div>
<pre>
    rewrite X.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 272
Time: 0.001s">
<div class="time" style="width: 0.02523340903356%"></div>
<pre> reflexivity.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 272
Time: 0.794s">
<div class="time" style="width: 20.035326772647%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 273
Time: 0.267s">
<div class="time" style="width: 6.7373202119606%"></div>
<pre>

End POCase.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 276
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

</pre>
</div>
</body>
</html>


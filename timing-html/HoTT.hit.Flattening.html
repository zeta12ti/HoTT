<html>
<head>
<title>Flattening.v</title>
<style>
.time {
  background-color: #ffaaaa;
  height: 100%;
  z-index: -1;
  position: absolute;
}
.code {
  z-index: 0;
  position: relative;
  border-style: solid;
  border-color: transparent;
  border-width: 1px;
}
.code:hover {
  border-style: solid;
  border-color: black;
  border-width: 1px;
}
pre {
  margin: 1px;
}
</style>
</head>
<body>
<h1>Timings for Flattening.v</h1>

<div class="code" title="File: Flattening.v
Line: 1
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>(* -*- mode: coq; mode: visual-line -*- *)

(** * The flattening lemma. *)

</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 4
Time: 0.044s">
<div class="time" style="width: 6.1196105702364%"></div>
<pre>Require Import HoTT.Basics UnivalenceImpliesFunext.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 4
Time: 0.005s">
<div class="time" style="width: 0.69541029207232%"></div>
<pre>
Require Import Types.Paths Types.Forall Types.Sigma Types.Arrow Types.Universe.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 5
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Local Open Scope path_scope.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 6
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Local Open Scope equiv_scope.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 7
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>


(** First we define the general non-recursive HIT. *)

</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 11
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Module Export BaseHIT.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 11
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Private Inductive W (A B : Type) (f g : B -&gt; A) : Type :=
| cc : A -&gt; W A B f g.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 14
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Arguments cc {A B f g} a.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 16
Time: 0.001s">
<div class="time" style="width: 0.13908205841446%"></div>
<pre>

Axiom pp : forall {A B f g} (b:B), @cc A B f g (f b) = cc (g b).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 18
Time: 0.007s">
<div class="time" style="width: 0.97357440890125%"></div>
<pre>

Definition W_ind {A B f g} (P : W A B f g -&gt; Type)
  (cc' : forall a, P (cc a))
  (pp' : forall b, (pp b) # (cc' (f b)) = cc' (g b))
  : forall w, P w
  := fun w =&gt; match w with cc a =&gt; fun _ =&gt; cc' a end pp'.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 24
Time: 0.007s">
<div class="time" style="width: 0.97357440890125%"></div>
<pre>

Axiom W_ind_beta_pp
  : forall {A B f g} (P : W A B f g -&gt; Type) (cc' : forall a, P (cc a))
  (pp' : forall b, (pp b) # (cc' (f b)) = cc' (g b)) (b:B),
  apD (W_ind P cc' pp') (pp b) = pp' b.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 29
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

End BaseHIT.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 31
Time: 0.005s">
<div class="time" style="width: 0.69541029207232%"></div>
<pre>

Definition W_rec {A B f g} (P : Type) (cc' : A -&gt; P)
  (pp' : forall b, cc' (f b) = cc' (g b))
  : W A B f g -&gt; P
  := W_ind (fun _ =&gt; P) cc' (fun b =&gt; transport_const _ _ @ pp' b).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 36
Time: 0.003s">
<div class="time" style="width: 0.41724617524339%"></div>
<pre>

Definition W_rec_beta_pp {A B f g} (P : Type) (cc' : A -&gt; P)
  (pp' : forall b:B, cc' (f b) = cc' (g b)) (b:B)
  : ap (W_rec P cc' pp') (pp b) = pp' b.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 40
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 41
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  unfold W_rec.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 42
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  (** Use [eapply] rather than [refine] so that we don't get evars as goals, and don't have to shelve any goals with [shelve_unifiable]. *)
 </pre>
</div>
<div class="code" title="File: Flattening.v
Line: 44
Time: 0.005s">
<div class="time" style="width: 0.69541029207232%"></div>
<pre>eapply (cancelL (transport_const (pp b) _)).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 44
Time: 0.047s">
<div class="time" style="width: 6.5368567454798%"></div>
<pre>
  refine ((apD_const (@W_ind A B f g (fun _ =&gt; P) cc' _) (pp b))^ @ _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 45
Time: 0.007s">
<div class="time" style="width: 0.97357440890125%"></div>
<pre>
  refine (W_ind_beta_pp (fun _ =&gt; P) _ _ _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 46
Time: 0.042s">
<div class="time" style="width: 5.8414464534075%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 47
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>



(** Now we define the flattened HIT which will be equivalent to the total space of a fibration over [W]. *)

</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 52
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Module Export FlattenedHIT.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 52
Time: 0.001s">
<div class="time" style="width: 0.13908205841446%"></div>
<pre>

Private Inductive Wtil (A B : Type) (f g : B -&gt; A)
  (C : A -&gt; Type) (D : forall b, C (f b) &lt;~&gt; C (g b))
  : Type :=
| cct : forall a, C a -&gt; Wtil A B f g C D.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 57
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Arguments cct {A B f g C D} a c.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 59
Time: 0.003s">
<div class="time" style="width: 0.41724617524339%"></div>
<pre>

Axiom ppt : forall {A B f g C D} (b:B) (y:C (f b)),
  @cct A B f g C D (f b) y = cct (g b) (D b y).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 62
Time: 0.009s">
<div class="time" style="width: 1.2517385257302%"></div>
<pre>

Definition Wtil_ind {A B f g C D} (Q : Wtil A B f g C D -&gt; Type)
  (cct' : forall a x, Q (cct a x))
  (ppt' : forall b y, (ppt b y) # (cct' (f b) y) = cct' (g b) (D b y))
  : forall w, Q w
  := fun w =&gt; match w with cct a x =&gt; cct' a x end.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 68
Time: 0.015s">
<div class="time" style="width: 2.086230876217%"></div>
<pre>

Axiom Wtil_ind_beta_ppt
  : forall {A B f g C D} (Q : Wtil A B f g C D -&gt; Type)
    (cct' : forall a x, Q (cct a x))
    (ppt' : forall b y, (ppt b y) # (cct' (f b) y) = cct' (g b) (D b y))
    (b:B) (y : C (f b)),
    apD (Wtil_ind Q cct' ppt') (ppt b y) = ppt' b y.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 75
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

End FlattenedHIT.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 77
Time: 0.01s">
<div class="time" style="width: 1.3908205841446%"></div>
<pre>

Definition Wtil_rec {A B f g C} {D : forall b, C (f b) &lt;~&gt; C (g b)}
  (Q : Type) (cct' : forall a (x : C a), Q)
  (ppt' : forall b (y : C (f b)), cct' (f b) y = cct' (g b) (D b y))
  : Wtil A B f g C D -&gt; Q
  := Wtil_ind (fun _ =&gt; Q) cct' (fun b y =&gt; transport_const _ _ @ ppt' b y).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 83
Time: 0.007s">
<div class="time" style="width: 0.97357440890125%"></div>
<pre>

Definition Wtil_rec_beta_ppt
  {A B f g C} {D : forall b, C (f b) &lt;~&gt; C (g b)}
  (Q : Type) (cct' : forall a (x : C a), Q)
  (ppt' : forall (b:B) (y : C (f b)), cct' (f b) y = cct' (g b) (D b y))
  (b:B) (y: C (f b))
  : ap (@Wtil_rec A B f g C D Q cct' ppt') (ppt b y) = ppt' b y.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 90
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 91
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  unfold Wtil_rec.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 92
Time: 0.008s">
<div class="time" style="width: 1.1126564673157%"></div>
<pre>
  eapply (cancelL (transport_const (ppt (C:=C) b y) _)).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 93
Time: 0.077s">
<div class="time" style="width: 10.709318497914%"></div>
<pre>
  refine ((apD_const
    (@Wtil_ind A B f g C D (fun _ =&gt; Q) cct' _) (ppt b y))^ @ _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 95
Time: 0.013s">
<div class="time" style="width: 1.808066759388%"></div>
<pre>
  refine (Wtil_ind_beta_ppt (fun _ =&gt; Q) _ _ _ _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 96
Time: 0.074s">
<div class="time" style="width: 10.29207232267%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 97
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>



(** Now we define the fibration over it that we will be considering the total space of. *)

</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 102
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Section AssumeAxioms.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 102
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Context `{Univalence}.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 103
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Context {A B : Type} {f g : B -&gt; A}.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 105
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Context {C : A -&gt; Type} {D : forall b, C (f b) &lt;~&gt; C (g b)}.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 106
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Let W' := W A B f g.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 108
Time: 0.001s">
<div class="time" style="width: 0.13908205841446%"></div>
<pre>

Let P : W' -&gt; Type
  := W_rec Type C (fun b =&gt; path_universe (D b)).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 111
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>



(** Now we give the total space the same structure as [Wtil]. *)

</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 116
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Let sWtil := { w:W' &amp; P w }.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 116
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Let scct (a:A) (x:C a) : sWtil := (existT P (cc a) x).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 118
Time: 0.005s">
<div class="time" style="width: 0.69541029207232%"></div>
<pre>

Let sppt (b:B) (y:C (f b)) : scct (f b) y = scct (g b) (D b y)
  := path_sigma' P (pp b)
       (transport_path_universe' P (pp b) (D b)
         (W_rec_beta_pp Type C (fun b0 =&gt; path_universe (D b0)) b) y).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 123
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Here is the dependent eliminator *)</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 125
Time: 0.001s">
<div class="time" style="width: 0.13908205841446%"></div>
<pre>Definition sWtil_ind (Q : sWtil -&gt; Type)
  (scct' : forall a x, Q (scct a x))
  (sppt' : forall b y, (sppt b y) # (scct' (f b) y) = scct' (g b) (D b y))
  : forall w, Q w.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 128
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 129
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply sigT_ind.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 130
Time: 0.005s">
<div class="time" style="width: 0.69541029207232%"></div>
<pre>
  refine (W_ind (fun w =&gt; forall x:P w, Q (w;x))
    (fun a x =&gt; scct' a x) _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 132
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intros b.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 133
Time: 0.003s">
<div class="time" style="width: 0.41724617524339%"></div>
<pre>
  apply (dpath_forall P (fun a b =&gt; Q (a;b)) _ _ (pp b)
    (scct' (f b)) (scct' (g b))).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 135
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intros y.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 136
Time: 0.004s">
<div class="time" style="width: 0.55632823365786%"></div>
<pre>
  set (q := transport_path_universe' P (pp b) (D b)
    (W_rec_beta_pp Type C (fun b0 : B =&gt; path_universe (D b0)) b) y).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 138
Time: 0.004s">
<div class="time" style="width: 0.55632823365786%"></div>
<pre>
  rewrite transportD_is_transport.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 139
Time: 0.007s">
<div class="time" style="width: 0.97357440890125%"></div>
<pre>
  refine (_ @ apD (scct' (g b)) q^).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 140
Time: 0.004s">
<div class="time" style="width: 0.55632823365786%"></div>
<pre>
  refine (moveL_transport_V (fun x =&gt; Q (scct (g b) x)) q _ _ _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 141
Time: 0.006s">
<div class="time" style="width: 0.83449235048679%"></div>
<pre>
  rewrite transport_compose, &lt;- transport_pp.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 142
Time: 0.004s">
<div class="time" style="width: 0.55632823365786%"></div>
<pre>
  refine (_ @ sppt' b y).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 143
Time: 0.002s">
<div class="time" style="width: 0.27816411682893%"></div>
<pre>
  apply ap10, ap.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 144
Time: 0.012s">
<div class="time" style="width: 1.6689847009736%"></div>
<pre>
  refine (whiskerL _ (ap_existT P (cc (g b)) _ _ q) @ _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 145
Time: 0.004s">
<div class="time" style="width: 0.55632823365786%"></div>
<pre>
  exact ((path_sigma_p1_1p' _ _ _)^).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 146
Time: 0.041s">
<div class="time" style="width: 5.702364394993%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 147
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** The eliminator computes on the point constructor. *)</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 149
Time: 0.002s">
<div class="time" style="width: 0.27816411682893%"></div>
<pre>Definition sWtil_ind_beta_cct (Q : sWtil -&gt; Type)
  (scct' : forall a x, Q (scct a x))
  (sppt' : forall b y, (sppt b y) # (scct' (f b) y) = scct' (g b) (D b y))
  (a:A) (x:C a)
  : sWtil_ind Q scct' sppt' (scct a x) = scct' a x
  := 1.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 154
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** This would be its propositional computation rule on the path constructor... *)
(**
&lt;&lt;
Definition sWtil_ind_beta_ppt (Q : sWtil -&gt; Type)
  (scct' : forall a x, Q (scct a x))
  (sppt' : forall b y, (sppt b y) # (scct' (f b) y) = scct' (g b) (D b y))
  (b:B) (y:C (f b))
  : apD (sWtil_ind Q scct' sppt') (sppt b y) = sppt' b y.
Proof.
  unfold sWtil_ind.
  (** ... but it's a doozy! *)
Abort.
&gt;&gt; *)

(** Fortunately, it turns out to be enough to have the computation rule for the *non-dependent* eliminator! *)

(** We could define that in terms of the dependent one, as usual...
&lt;&lt;
Definition sWtil_rec (P : Type)
  (scct' : forall a (x : C a), P)
  (sppt' : forall b (y : C (f b)), scct' (f b) y = scct' (g b) (D b y))
  : sWtil -&gt; P
  := sWtil_ind (fun _ =&gt; P) scct' (fun b y =&gt; transport_const _ _ @ sppt' b y).
&gt;&gt; *)

(** ...but if we define it diindly, then it's easier to reason about. *)</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 181
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition sWtil_rec (Q : Type)
  (scct' : forall a (x : C a), Q)
  (sppt' : forall b (y : C (f b)), scct' (f b) y = scct' (g b) (D b y))
  : sWtil -&gt; Q.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 184
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 185
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply sigT_ind.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 186
Time: 0.003s">
<div class="time" style="width: 0.41724617524339%"></div>
<pre>
  refine (W_ind (fun w =&gt; P w -&gt; Q) (fun a x =&gt; scct' a x) _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 187
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intros b.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 188
Time: 0.003s">
<div class="time" style="width: 0.41724617524339%"></div>
<pre>
  refine (dpath_arrow P (fun _ =&gt; Q) _ _ _ _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 189
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intros y.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 190
Time: 0.002s">
<div class="time" style="width: 0.27816411682893%"></div>
<pre>
  refine (transport_const _ _ @ _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 191
Time: 0.002s">
<div class="time" style="width: 0.27816411682893%"></div>
<pre>
  refine (sppt' b _ @ ap _ _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 192
Time: 0.003s">
<div class="time" style="width: 0.41724617524339%"></div>
<pre>
  refine ((transport_path_universe' P (pp b) (D b) _ _)^).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 193
Time: 0.001s">
<div class="time" style="width: 0.13908205841446%"></div>
<pre>
  exact (W_rec_beta_pp _ _ _ _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 194
Time: 0.005s">
<div class="time" style="width: 0.69541029207232%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 195
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Open Scope long_path_scope.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 197
Time: 0.001s">
<div class="time" style="width: 0.13908205841446%"></div>
<pre>

Definition sWtil_rec_beta_ppt (Q : Type)
  (scct' : forall a (x : C a), Q)
  (sppt' : forall b (y : C (f b)), scct' (f b) y = scct' (g b) (D b y))
  (b:B) (y: C (f b))
  : ap (sWtil_rec Q scct' sppt') (sppt b y) = sppt' b y.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 203
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 204
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  unfold sWtil_rec, sppt.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 205
Time: 0.234s">
<div class="time" style="width: 32.545201668985%"></div>
<pre>
  refine (@ap_sigT_rec_path_sigma W' P Q _ _ (pp b) _ _ _ _ @ _); simpl.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 206
Time: 0.039s">
<div class="time" style="width: 5.4242002781641%"></div>
<pre>
  rewrite (@W_ind_beta_pp A B f g).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 207
Time: 0.037s">
<div class="time" style="width: 5.1460361613352%"></div>
<pre>
  rewrite (ap10_dpath_arrow P (fun _ =&gt; Q) (pp b) _ _ _ y).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 208
Time: 0.114s">
<div class="time" style="width: 15.855354659249%"></div>
<pre>
  repeat rewrite concat_p_pp.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 209
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  (** Now everything cancels! *)
 </pre>
</div>
<div class="code" title="File: Flattening.v
Line: 211
Time: 0.119s">
<div class="time" style="width: 16.550764951321%"></div>
<pre>rewrite ap_V, concat_pV_p, concat_pV_p, concat_pV_p, concat_Vp.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 211
Time: 0.002s">
<div class="time" style="width: 0.27816411682893%"></div>
<pre>
  by apply concat_1p.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 212
Time: 0.719s">
<div class="time" style="width: 100%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 213
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Close Scope long_path_scope.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 215
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Woot! *)</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 217
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition equiv_flattening : Wtil A B f g C D &lt;~&gt; sWtil.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 217
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 218
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  (** The maps back and forth are obtained easily from the non-dependent eliminators. *)
 </pre>
</div>
<div class="code" title="File: Flattening.v
Line: 220
Time: 0.007s">
<div class="time" style="width: 0.97357440890125%"></div>
<pre>refine (equiv_adjointify
    (Wtil_rec _ scct sppt)
    (sWtil_rec _ cct ppt)
    _ _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 223
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  (** The two homotopies are completely symmetrical, using the *dependent* eliminators, but only the computation rules for the non-dependent ones. *)
 </pre>
</div>
<div class="code" title="File: Flattening.v
Line: 225
Time: 0.003s">
<div class="time" style="width: 0.41724617524339%"></div>
<pre>refine (sWtil_ind _ (fun a x =&gt; 1) _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 225
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros b y.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 225
Time: 0.004s">
<div class="time" style="width: 0.55632823365786%"></div>
<pre>
  apply dpath_path_FFlr.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 226
Time: 0.008s">
<div class="time" style="width: 1.1126564673157%"></div>
<pre>
  rewrite concat_1p, concat_p1.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 227
Time: 0.005s">
<div class="time" style="width: 0.69541029207232%"></div>
<pre>
  rewrite sWtil_rec_beta_ppt.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 228
Time: 0.008s">
<div class="time" style="width: 1.1126564673157%"></div>
<pre>
  by symmetry; apply (@Wtil_rec_beta_ppt A B f g C D).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 229
Time: 0.008s">
<div class="time" style="width: 1.1126564673157%"></div>
<pre>
  refine (Wtil_ind _ (fun a x =&gt; 1) _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 230
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros b y.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 230
Time: 0.004s">
<div class="time" style="width: 0.55632823365786%"></div>
<pre>
  apply dpath_path_FFlr.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 231
Time: 0.013s">
<div class="time" style="width: 1.808066759388%"></div>
<pre>
  rewrite concat_1p, concat_p1.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 232
Time: 0.009s">
<div class="time" style="width: 1.2517385257302%"></div>
<pre>
  rewrite Wtil_rec_beta_ppt.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 233
Time: 0.01s">
<div class="time" style="width: 1.3908205841446%"></div>
<pre>
  by symmetry; apply sWtil_rec_beta_ppt.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 234
Time: 0.05s">
<div class="time" style="width: 6.9541029207232%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 235
Time: 0.167s">
<div class="time" style="width: 23.226703755216%"></div>
<pre>

End AssumeAxioms.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 238
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

</pre>
</div>
</body>
</html>


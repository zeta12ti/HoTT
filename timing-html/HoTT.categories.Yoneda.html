<html>
<head>
<title>Yoneda.v</title>
<style>
.time {
  background-color: #ffaaaa;
  height: 100%;
  z-index: -1;
  position: absolute;
}
.code {
  z-index: 0;
  position: relative;
  border-style: solid;
  border-color: transparent;
  border-width: 1px;
}
.code:hover {
  border-style: solid;
  border-color: black;
  border-width: 1px;
}
pre {
  margin: 1px;
}
</style>
</head>
<body>
<h1>Timings for Yoneda.v</h1>

<div class="code" title="File: Yoneda.v
Line: 1
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>(** * The Yoneda Lemma *)</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 1
Time: 0.008s">
<div class="time" style="width: 4.0201005025126%"></div>
<pre>Require Import Category.Core Functor.Core NaturalTransformation.Core.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 1
Time: 0.033s">
<div class="time" style="width: 16.582914572864%"></div>
<pre>
Require Import Category.Dual Functor.Dual.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 2
Time: 0.001s">
<div class="time" style="width: 0.50251256281407%"></div>
<pre>
Require Import Category.Prod.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 3
Time: 0.002s">
<div class="time" style="width: 1.0050251256281%"></div>
<pre>
Require Import Functor.Composition.Core NaturalTransformation.Composition.Core.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 4
Time: 0.009s">
<div class="time" style="width: 4.5226130653266%"></div>
<pre>
Require Import Category.Morphisms FunctorCategory.Morphisms.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 5
Time: 0.014s">
<div class="time" style="width: 7.035175879397%"></div>
<pre>
Require Import SetCategory.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 6
Time: 0.031s">
<div class="time" style="width: 15.577889447236%"></div>
<pre>
Require Import Functor.Attributes.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 7
Time: 0.027s">
<div class="time" style="width: 13.56783919598%"></div>
<pre>
Require Import Functor.Composition.Functorial.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 8
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Require Import Functor.Identity.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 9
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Require ExponentialLaws.Law4.Functors.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 10
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Require ProductLaws.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 11
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Require Import HomFunctor.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 12
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Require Import FunctorCategory.Core.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 13
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Require Import NaturalTransformation.Paths.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 14
Time: 0.002s">
<div class="time" style="width: 1.0050251256281%"></div>
<pre>
Require Import HSet HoTT.Tactics.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 15
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Set Universe Polymorphism.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 17
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Set Implicit Arguments.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 18
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Generalizable All Variables.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 19
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Set Asymmetric Patterns.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 20
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Local Open Scope morphism_scope.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 22
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Local Open Scope category_scope.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 23
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Local Open Scope functor_scope.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 24
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Quoting Wikipedia on the Yoneda lemma (chainging [A] to [a] and
    [C] to [A] so that we can use unicode superscripts and
    subscripts):

    In mathematics, specifically in category theory, the Yoneda lemma
    is an abstract result on functors of the type morphisms into a
    fixed object. It is a vast generalisation of Cayley's theorem from
    group theory (viewing a group as a particular kind of category
    with just one object). It allows the embedding of any category
    into a category of functors (contravariant set-valued functors)
    defined on that category. It also clarifies how the embedded
    category, of representable functors and their natural
    transformations, relates to the other objects in the larger
    functor category. It is an important tool that underlies several
    modern developments in algebraic geometry and representation
    theory. It is named after Nobuo Yoneda.

    ** Generalities

    The Yoneda lemma suggests that instead of studying the (locally
    small) category [A], one should study the category of all functors
    of [A] into [Set] (the category of sets with functions as
    morphisms). [Set] is a category we understand well, and a functor
    of [A] into [Set] can be seen as a "representation" of [A] in
    terms of known structures. The original category [A] is contained
    in this functor category, but new objects appear in the functor
    category which were absent and "hidden" in [A]. Treating these new
    objects just like the old ones often unifies and simplifies the
    theory.  This approach is akin to (and in fact generalizes) the
    common method of studying a ring by investigating the modules over
    that ring. The ring takes the place of the category [A], and the
    category of modules over the ring is a category of functors
    defined on [A].

    ** Formal statement

    *** General version

    Yoneda's lemma concerns functors from a fixed category [A] to the
    category of sets, [Set]. If [A] is a locally small category
    (i.e. the hom-sets are actual sets and not proper classes), then
    each object [a] of [A] gives rise to a natural functor to [Set]
    called a hom-functor. This functor is denoted:

    [hᵃ = Hom(a, ─)].

    The (covariant) hom-functor [hᵃ] sends [x] to the set of morphisms
    [Hom(a, x)] and sends a morphism [f] from [x] to [y] to the
    morphism [f ∘ ─] (composition with [f] on the left) that sends a
    morphism [g] in [Hom(a, x)] to the morphism [f ∘ g] in [Hom(a,
    y)]. That is,

    [f ↦ Hom(a, f) = ⟦ Hom(a, x) ∋ g ↦ f ∘ g ∈ Hom(a,y) ⟧].
 *)

(** ** The (co)yoneda functors [A → (Aᵒᵖ → set)] *)</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 81
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Section yoneda.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 81
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Context `{Funext}.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 82
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (* TODO(JasonGross): Find a way to unify the [yoneda] and [coyoneda] lemmas into a single lemma which is more functorial. *)

 </pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 86
Time: 0.012s">
<div class="time" style="width: 6.0301507537688%"></div>
<pre>Definition coyoneda A : Functor A^op (A -&gt; set_cat)
    := ExponentialLaws.Law4.Functors.inverse _ _ _ (hom_functor A).</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 87
Time: 0.004s">
<div class="time" style="width: 2.0100502512563%"></div>
<pre>

  Definition yoneda A : Functor A (A^op -&gt; set_cat)
    := coyoneda A^op.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 90
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
End yoneda.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 91
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** ** The (co)yoneda lemma *)</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 93
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Section coyoneda_lemma.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 93
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Local Arguments Overture.compose / .</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 94
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  Section functor.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 96
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    Context `{Funext}.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 97
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

    Variable A : PreCategory.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 99
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    (** Let [F] be an arbitrary functor from [A] to [Set]. Then Yoneda's
      lemma says that: *)
    (*Variable F : Functor A (@set_cat fs).*)
    (** For each object [a] of [A], *)
    (*Variable a : A.*)
    (** the natural transformations from [hᵃ] to [F] are in one-to-one
      correspondence with the elements of [F(a)]. That is,

      [Nat(hᵃ, F) ≅ F(a)].

      Moreover this isomorphism is natural in [a] and [F] when both
      sides are regarded as functors from [Setᴬ × A] to
      [Set].

      Given a natural transformation [Φ] from [hᵃ] to [F], the
      corresponding element of [F(a)] is [u = Φₐ(idₐ)]. *)

    (*   Definition coyoneda_lemma_morphism (a : A)
  : morphism set_cat
             (BuildhSet
                (morphism (A -&gt; set_cat) (coyoneda A a) F)
                _)
             (F a)
    := fun phi =&gt; phi a 1%morphism. *)


   </pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 126
Time: 0.039s">
<div class="time" style="width: 19.597989949749%"></div>
<pre>Definition coyoneda_functor
    : Functor (A -&gt; set_cat)
              (A -&gt; set_cat)
      := (compose_functor _ _ set_cat (coyoneda A)^op)
           o (yoneda (A -&gt; set_cat)).</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 130
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  End functor.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 131
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  Section nt.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 133
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    Context `{Funext}.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 134
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

    Variable A : PreCategory.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 136
Time: 0.011s">
<div class="time" style="width: 5.5276381909548%"></div>
<pre>

    Definition coyoneda_natural_transformation_helper F
    : morphism (_ -&gt; _) (coyoneda_functor A F) F.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 139
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    Proof.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 140
Time: 0.159s">
<div class="time" style="width: 79.899497487437%"></div>
<pre>
      refine (Build_NaturalTransformation
                (coyoneda_functor A F) F
                (fun a phi =&gt; phi a 1%morphism)
                _).</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 144
Time: 0.005s">
<div class="time" style="width: 2.5125628140704%"></div>
<pre>
      simpl.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 145
Time: 0.059s">
<div class="time" style="width: 29.64824120603%"></div>
<pre>
      abstract (
          repeat (intro || apply path_forall);
          simpl in *;
            match goal with
              | [ T : NaturalTransformation _ _ |- _ ]
                =&gt; simpl rewrite &lt;- (fun s d m =&gt; apD10 (commutes T s d m))
            end;
          rewrite ?left_identity, ?right_identity;
          reflexivity
        ).</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 155
Time: 0.199s">
<div class="time" style="width: 100%"></div>
<pre>
    Defined.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 156
Time: 0.008s">
<div class="time" style="width: 4.0201005025126%"></div>
<pre>

    Definition coyoneda_natural_transformation
    : morphism (_ -&gt; _)
               (coyoneda_functor A)
               1.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 161
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    Proof.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 162
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      hnf.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 163
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      simpl.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 164
Time: 0.004s">
<div class="time" style="width: 2.0100502512563%"></div>
<pre>
      let F := match goal with |- NaturalTransformation ?F ?G =&gt; constr:(F) end in
      let G := match goal with |- NaturalTransformation ?F ?G =&gt; constr:(G) end in
      refine (Build_NaturalTransformation
                F G
                coyoneda_natural_transformation_helper
                _).</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 170
Time: 0.002s">
<div class="time" style="width: 1.0050251256281%"></div>
<pre>
      simpl.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 171
Time: 0.042s">
<div class="time" style="width: 21.105527638191%"></div>
<pre>
      abstract (repeat first [ intro
                             | progress path_natural_transformation
                             | reflexivity ]).</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 174
Time: 0.033s">
<div class="time" style="width: 16.582914572864%"></div>
<pre>
    Defined.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 175
Time: 0.004s">
<div class="time" style="width: 2.0100502512563%"></div>
<pre>
  End nt.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 176
Time: 0.007s">
<div class="time" style="width: 3.5175879396985%"></div>
<pre>

  Definition coyoneda_lemma_morphism_inverse
             `{Funext}
             A
             (F : object (A -&gt; set_cat))
             a
  : morphism set_cat
             (F a)
             (coyoneda_functor A F a).</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 185
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 186
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    intro Fa.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 187
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    hnf.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 188
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    simpl in *.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 189
Time: 0.006s">
<div class="time" style="width: 3.0150753768844%"></div>
<pre>
    let F0 := match goal with |- NaturalTransformation ?F ?G =&gt; constr:(F) end in
    let G0 := match goal with |- NaturalTransformation ?F ?G =&gt; constr:(G) end in
    refine (Build_NaturalTransformation
              F0 G0
              (fun a' : A =&gt; (fun f : morphism A a a' =&gt; morphism_of F f Fa))
              _
           ).</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 196
Time: 0.001s">
<div class="time" style="width: 0.50251256281407%"></div>
<pre>
    simpl.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 197
Time: 0.013s">
<div class="time" style="width: 6.5326633165829%"></div>
<pre>
    abstract (
        repeat first [ reflexivity
                     | intro
                     | apply path_forall
                     | progress rewrite ?composition_of, ?identity_of ]
      ).</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 203
Time: 0.025s">
<div class="time" style="width: 12.562814070352%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 204
Time: 0.002s">
<div class="time" style="width: 1.0050251256281%"></div>
<pre>

  Global Instance coyoneda_lemma `{Funext} A
  : IsIsomorphism (coyoneda_natural_transformation A).</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 207
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 208
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    eapply isisomorphism_natural_transformation.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 209
Time: 0.001s">
<div class="time" style="width: 0.50251256281407%"></div>
<pre>
    simpl.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 210
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    intro F.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 211
Time: 0.002s">
<div class="time" style="width: 1.0050251256281%"></div>
<pre>
    eapply isisomorphism_natural_transformation.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 212
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    intro a.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 213
Time: 0.001s">
<div class="time" style="width: 0.50251256281407%"></div>
<pre>
    simpl.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 214
Time: 0.09s">
<div class="time" style="width: 45.226130653266%"></div>
<pre>
    exists (coyoneda_lemma_morphism_inverse F a);
      simpl in *;
    abstract (
        repeat (intro || apply path_forall || path_natural_transformation);
        simpl in *;
          solve [ simpl rewrite &lt;- (fun c d m =&gt; ap10 (commutes x c d m));
                  rewrite ?right_identity, ?left_identity;
                  reflexivity
                | rewrite identity_of;
                  reflexivity ]
      ).</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 225
Time: 0.05s">
<div class="time" style="width: 25.125628140704%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 226
Time: 0.035s">
<div class="time" style="width: 17.587939698492%"></div>
<pre>
End coyoneda_lemma.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 227
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Section yoneda_lemma.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 229
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  (** There is a contravariant version of Yoneda's lemma which
      concerns contravariant functors from [A] to [Set]. This version
      involves the contravariant hom-functor

      [hₐ = Hom(─, A)],

      which sends [x] to the hom-set [Hom(x, a)]. Given an arbitrary
      contravariant functor [G] from [A] to [Set], Yoneda's lemma
      asserts that

      [Nat(hₐ, G) ≅ G(a)]. *)

 </pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 242
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Local Arguments Overture.compose / .</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 242
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  Section functor.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 244
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    Context `{Funext}.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 245
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

    Variable A : PreCategory.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 247
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    (** Let [F] be an arbitrary functor from [A] to [Set]. Then Yoneda's
      lemma says that: *)
    (*Variable F : Functor A (@set_cat fs).*)
    (** For each object [a] of [A], *)
    (*Variable a : A.*)
    (** the natural transformations from [hᵃ] to [F] are in one-to-one
      correspondence with the elements of [F(a)]. That is,

      [Nat(hᵃ, F) ≅ F(a)].

      Moreover this isomorphism is natural in [a] and [F] when both
      sides are regarded as functors from [Setᴬ × A] to
      [Set].

      Given a natural transformation [Φ] from [hᵃ] to [F], the
      corresponding element of [F(a)] is [u = Φₐ(idₐ)]. *)

    (* Definition yoneda_lemma_morphism A (G : object (A^op -&gt; set_cat)) (a : A)
  : morphism set_cat
             (BuildhSet
                (morphism (A^op -&gt; set_cat) (yoneda A a) G)
                _)
             (G a)
    := fun phi =&gt; phi a 1%morphism.*)

   </pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 273
Time: 0.01s">
<div class="time" style="width: 5.0251256281407%"></div>
<pre>Definition yoneda_functor
    : Functor (A^op -&gt; set_cat)
              (A^op -&gt; set_cat)
      := coyoneda_functor A^op.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 276
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  End functor.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 277
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  Context `{Funext}.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 279
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  Variable A : PreCategory.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 281
Time: 0.01s">
<div class="time" style="width: 5.0251256281407%"></div>
<pre>

  Definition yoneda_natural_transformation
  : morphism (_ -&gt; _)
             1
             (yoneda_functor A)
    := @morphism_inverse _ _ _ _ (coyoneda_lemma A^op).</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 287
Time: 0.005s">
<div class="time" style="width: 2.5125628140704%"></div>
<pre>

  Global Instance yoneda_lemma
  : IsIsomorphism yoneda_natural_transformation
    := @isisomorphism_inverse _ _ _ _ (coyoneda_lemma A^op).</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 291
Time: 0.001s">
<div class="time" style="width: 0.50251256281407%"></div>
<pre>
End yoneda_lemma.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 292
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** ** The Yoneda embedding

    An important special case of Yoneda's lemma is when the functor
    [F] from [A] to [Set] is another hom-functor [hᵇ]. In this case,
    the covariant version of Yoneda's lemma states that

    [Nat(hᵃ, hᵇ) ≅ Hom(b, a)].

    That is, natural transformations between hom-functors are in
    one-to-one correspondence with morphisms (in the reverse
    direction) between the associated objects. Given a morphism [f : b
    → a] the associated natural transformation is denoted [Hom(f, ─)].

    Mapping each object [a] in [A] to its associated hom-functor [hᵃ=
    Hom(a, ─)] and each morphism [f : B → A] to the corresponding
    natural transformation [Hom(f, ─)] determines a contravariant
    functor [h⁻] from [A] to [Setᴬ], the functor category of all
    (covariant) functors from [A] to [Set]. One can interpret [h⁻] as
    a covariant functor:

    [h⁻ : Aᵒᵖ → Setᴬ].

    The meaning of Yoneda's lemma in this setting is that the functor
    [h⁻] is fully faithful, and therefore gives an embedding of [Aᵒᵖ]
    in the category of functors to [Set]. The collection of all
    functors {[hᵃ], [a] in [A]} is a subcategory of [Set̂ᴬ]. Therefore,
    Yoneda embedding implies that the category [Aᵒᵖ] is isomorphic to
    the category {[hᵃ], [a] in [A]}.

    The contravariant version of Yoneda's lemma states that

    [Nat(hₐ, h_b) ≅ Hom(a, b)].

    Therefore, [h₋] gives rise to a covariant functor from [A] to the
    category of contravariant functors to [Set]:

    [h₋ : A → Set⁽⁽ᴬ⁾ᵒᵖ⁾].

    Yoneda's lemma then states that any locally small category [A] can
    be embedded in the category of contravariant functors from [A] to
    [Set] via [h₋]. This is called the Yoneda embedding. *)

</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 335
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Section FullyFaithful.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 335
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Context `{Funext}.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 336
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  Local Arguments Overture.compose / .</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 338
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  Definition coyoneda_embedding (A : PreCategory) : IsFullyFaithful (coyoneda A).</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 340
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 341
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    intros a b.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 342
Time: 0.007s">
<div class="time" style="width: 3.5175879396985%"></div>
<pre>
    pose proof (@isisomorphism_inverse
                  _ _ _ _
                  (@isisomorphism_components_of
                     _ _ _ _ _ _
                     (@isisomorphism_components_of
                        _ _ _ _ _ _
                        (@coyoneda_lemma _ A)
                        (@coyoneda _ A b))
                     a)) as H'.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 351
Time: 0.004s">
<div class="time" style="width: 2.0100502512563%"></div>
<pre>
    simpl in *.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 352
Time: 0.001s">
<div class="time" style="width: 0.50251256281407%"></div>
<pre>
    unfold coyoneda_lemma_morphism_inverse in *; simpl in *.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 353
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    unfold Functors.inverse_object_of_morphism_of in *; simpl in *.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 354
Time: 0.004s">
<div class="time" style="width: 2.0100502512563%"></div>
<pre>
    let m := match type of H' with IsIsomorphism ?m =&gt; constr:(m) end in
    apply isisomorphism_set_cat_natural_transformation_paths with (T1 := m).</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 356
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 357
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> simpl.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 357
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      clear H'.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 358
Time: 0.002s">
<div class="time" style="width: 1.0050251256281%"></div>
<pre>
      intros; apply path_forall;
      intro;
      rewrite left_identity, right_identity;
      reflexivity.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 362
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 363
Time: 0.012s">
<div class="time" style="width: 6.0301507537688%"></div>
<pre> destruct H' as [m' H0' H1'].</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 363
Time: 0.005s">
<div class="time" style="width: 2.5125628140704%"></div>
<pre>
      (exists m').</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 364
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      +</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 365
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact H0'.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 365
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      +</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 366
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact H1'.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 366
Time: 0.057s">
<div class="time" style="width: 28.643216080402%"></div>
<pre>
  Qed.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 367
Time: 0.001s">
<div class="time" style="width: 0.50251256281407%"></div>
<pre>

  Definition yoneda_embedding (A : PreCategory) : IsFullyFaithful (yoneda A).</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 369
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 370
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    intros a b.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 371
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    pose proof (@coyoneda_embedding A^op a b) as CYE.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 372
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    unfold yoneda.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 373
Time: 0.009s">
<div class="time" style="width: 4.5226130653266%"></div>
<pre>
    let T := type of CYE in
    let T' := (eval simpl in T) in
    pose proof ((fun x : T =&gt; (x : T')) CYE) as CYE'.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 376
Time: 0.003s">
<div class="time" style="width: 1.5075376884422%"></div>
<pre>
    let G := match goal with |- ?G =&gt; constr:(G) end in
    let G' := (eval simpl in G) in
    exact ((fun x : G' =&gt; (x : G)) CYE').</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 379
Time: 0.014s">
<div class="time" style="width: 7.035175879397%"></div>
<pre>
  Qed.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 380
Time: 0.006s">
<div class="time" style="width: 3.0150753768844%"></div>
<pre>
End FullyFaithful.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 382
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

</pre>
</div>
</body>
</html>


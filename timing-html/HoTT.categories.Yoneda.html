<html>
<head>
<title>Yoneda.v</title>
<style>
.time {
  background-color: #ffaaaa;
  height: 100%;
  z-index: -1;
  position: absolute;
}
.code {
  z-index: 0;
  position: relative;
  border-style: solid;
  border-color: transparent;
  border-width: 1px;
}
.code:hover {
  border-style: solid;
  border-color: black;
  border-width: 1px;
}
pre {
  margin: 1px;
}
</style>
</head>
<body>
<h1>Timings for Yoneda.v</h1>

<div class="code" title="File: Yoneda.v
Line: 1
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>(** * The Yoneda Lemma *)</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 1
Time: 0.005s">
<div class="time" style="width: 2.7932960893855%"></div>
<pre>Require Import Category.Core Functor.Core NaturalTransformation.Core.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 1
Time: 0.032s">
<div class="time" style="width: 17.877094972067%"></div>
<pre>
Require Import Category.Dual Functor.Dual.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 2
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Require Import Category.Prod.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 3
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Require Import Functor.Composition.Core NaturalTransformation.Composition.Core.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 4
Time: 0.004s">
<div class="time" style="width: 2.2346368715084%"></div>
<pre>
Require Import Category.Morphisms FunctorCategory.Morphisms.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 5
Time: 0.006s">
<div class="time" style="width: 3.3519553072626%"></div>
<pre>
Require Import SetCategory.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 6
Time: 0.13s">
<div class="time" style="width: 72.625698324022%"></div>
<pre>
Require Import Functor.Attributes.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 7
Time: 0.008s">
<div class="time" style="width: 4.4692737430168%"></div>
<pre>
Require Import Functor.Composition.Functorial.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 8
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Require Import Functor.Identity.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 9
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Require ExponentialLaws.Law4.Functors.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 10
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Require ProductLaws.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 11
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Require Import HomFunctor.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 12
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Require Import FunctorCategory.Core.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 13
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Require Import NaturalTransformation.Paths.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 14
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Require Import HSet HoTT.Tactics.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 15
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Set Universe Polymorphism.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 17
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Set Implicit Arguments.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 18
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Generalizable All Variables.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 19
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Set Asymmetric Patterns.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 20
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Local Open Scope morphism_scope.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 22
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Local Open Scope category_scope.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 23
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Local Open Scope functor_scope.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 24
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Quoting Wikipedia on the Yoneda lemma (chainging [A] to [a] and
    [C] to [A] so that we can use unicode superscripts and
    subscripts):

    In mathematics, specifically in category theory, the Yoneda lemma
    is an abstract result on functors of the type morphisms into a
    fixed object. It is a vast generalisation of Cayley's theorem from
    group theory (viewing a group as a particular kind of category
    with just one object). It allows the embedding of any category
    into a category of functors (contravariant set-valued functors)
    defined on that category. It also clarifies how the embedded
    category, of representable functors and their natural
    transformations, relates to the other objects in the larger
    functor category. It is an important tool that underlies several
    modern developments in algebraic geometry and representation
    theory. It is named after Nobuo Yoneda.

    ** Generalities

    The Yoneda lemma suggests that instead of studying the (locally
    small) category [A], one should study the category of all functors
    of [A] into [Set] (the category of sets with functions as
    morphisms). [Set] is a category we understand well, and a functor
    of [A] into [Set] can be seen as a "representation" of [A] in
    terms of known structures. The original category [A] is contained
    in this functor category, but new objects appear in the functor
    category which were absent and "hidden" in [A]. Treating these new
    objects just like the old ones often unifies and simplifies the
    theory.  This approach is akin to (and in fact generalizes) the
    common method of studying a ring by investigating the modules over
    that ring. The ring takes the place of the category [A], and the
    category of modules over the ring is a category of functors
    defined on [A].

    ** Formal statement

    *** General version

    Yoneda's lemma concerns functors from a fixed category [A] to the
    category of sets, [Set]. If [A] is a locally small category
    (i.e. the hom-sets are actual sets and not proper classes), then
    each object [a] of [A] gives rise to a natural functor to [Set]
    called a hom-functor. This functor is denoted:

    [hᵃ = Hom(a, ─)].

    The (covariant) hom-functor [hᵃ] sends [x] to the set of morphisms
    [Hom(a, x)] and sends a morphism [f] from [x] to [y] to the
    morphism [f ∘ ─] (composition with [f] on the left) that sends a
    morphism [g] in [Hom(a, x)] to the morphism [f ∘ g] in [Hom(a,
    y)]. That is,

    [f ↦ Hom(a, f) = ⟦ Hom(a, x) ∋ g ↦ f ∘ g ∈ Hom(a,y) ⟧].
 *)

(** ** The (co)yoneda functors [A → (Aᵒᵖ → set)] *)</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 81
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Section yoneda.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 81
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Context `{Funext}.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 82
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (* TODO(JasonGross): Find a way to unify the [yoneda] and [coyoneda] lemmas into a single lemma which is more functorial. *)

 </pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 86
Time: 0.005s">
<div class="time" style="width: 2.7932960893855%"></div>
<pre>Definition coyoneda A : Functor A^op (A -&gt; set_cat)
    := ExponentialLaws.Law4.Functors.inverse _ _ _ (hom_functor A).</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 87
Time: 0.002s">
<div class="time" style="width: 1.1173184357542%"></div>
<pre>

  Definition yoneda A : Functor A (A^op -&gt; set_cat)
    := coyoneda A^op.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 90
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
End yoneda.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 91
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** ** The (co)yoneda lemma *)</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 93
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Section coyoneda_lemma.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 93
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  Section functor.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 95
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    Context `{Funext}.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 96
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

    Variable A : PreCategory.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 98
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    (** Let [F] be an arbitrary functor from [A] to [Set]. Then Yoneda's
      lemma says that: *)
    (*Variable F : Functor A (@set_cat fs).*)
    (** For each object [a] of [A], *)
    (*Variable a : A.*)
    (** the natural transformations from [hᵃ] to [F] are in one-to-one
      correspondence with the elements of [F(a)]. That is,

      [Nat(hᵃ, F) ≅ F(a)].

      Moreover this isomorphism is natural in [a] and [F] when both
      sides are regarded as functors from [Setᴬ × A] to
      [Set].

      Given a natural transformation [Φ] from [hᵃ] to [F], the
      corresponding element of [F(a)] is [u = Φₐ(idₐ)]. *)

    (*   Definition coyoneda_lemma_morphism (a : A)
  : morphism set_cat
             (BuildhSet
                (morphism (A -&gt; set_cat) (coyoneda A a) F)
                _)
             (F a)
    := fun phi =&gt; phi a 1%morphism. *)


   </pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 125
Time: 0.014s">
<div class="time" style="width: 7.8212290502793%"></div>
<pre>Definition coyoneda_functor
    : Functor (A -&gt; set_cat)
              (A -&gt; set_cat)
      := (compose_functor _ _ set_cat (coyoneda A)^op)
           o (yoneda (A -&gt; set_cat)).</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 129
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  End functor.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 130
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  Section nt.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 132
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    Context `{Funext}.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 133
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

    Variable A : PreCategory.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 135
Time: 0.004s">
<div class="time" style="width: 2.2346368715084%"></div>
<pre>

    Definition coyoneda_natural_transformation_helper F
    : morphism (_ -&gt; _) (coyoneda_functor A F) F.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 138
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    Proof.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 139
Time: 0.087s">
<div class="time" style="width: 48.603351955307%"></div>
<pre>
      refine (Build_NaturalTransformation
                (coyoneda_functor A F) F
                (fun a phi =&gt; phi a 1%morphism)
                _).</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 143
Time: 0.003s">
<div class="time" style="width: 1.6759776536313%"></div>
<pre>
      simpl.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 144
Time: 0.036s">
<div class="time" style="width: 20.111731843575%"></div>
<pre>
      abstract (
          repeat (intro || apply path_forall);
          simpl in *;
            match goal with
              | [ T : NaturalTransformation _ _ |- _ ]
                =&gt; simpl rewrite &lt;- (fun s d m =&gt; apD10 (commutes T s d m))
            end;
          rewrite ?left_identity, ?right_identity;
          reflexivity
        ).</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 154
Time: 0.179s">
<div class="time" style="width: 100%"></div>
<pre>
    Defined.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 155
Time: 0.004s">
<div class="time" style="width: 2.2346368715084%"></div>
<pre>

    Definition coyoneda_natural_transformation
    : morphism (_ -&gt; _)
               (coyoneda_functor A)
               1.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 160
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    Proof.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 161
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      hnf.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 162
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      simpl.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 163
Time: 0.004s">
<div class="time" style="width: 2.2346368715084%"></div>
<pre>
      let F := match goal with |- NaturalTransformation ?F ?G =&gt; constr:(F) end in
      let G := match goal with |- NaturalTransformation ?F ?G =&gt; constr:(G) end in
      refine (Build_NaturalTransformation
                F G
                coyoneda_natural_transformation_helper
                _).</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 169
Time: 0.002s">
<div class="time" style="width: 1.1173184357542%"></div>
<pre>
      simpl.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 170
Time: 0.038s">
<div class="time" style="width: 21.22905027933%"></div>
<pre>
      abstract (repeat first [ intro
                             | progress path_natural_transformation
                             | reflexivity ]).</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 173
Time: 0.03s">
<div class="time" style="width: 16.759776536313%"></div>
<pre>
    Defined.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 174
Time: 0.004s">
<div class="time" style="width: 2.2346368715084%"></div>
<pre>
  End nt.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 175
Time: 0.005s">
<div class="time" style="width: 2.7932960893855%"></div>
<pre>

  Definition coyoneda_lemma_morphism_inverse
             `{Funext}
             A
             (F : object (A -&gt; set_cat))
             a
  : morphism set_cat
             (F a)
             (coyoneda_functor A F a).</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 184
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 185
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    intro Fa.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 186
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    hnf.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 187
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    simpl in *.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 188
Time: 0.006s">
<div class="time" style="width: 3.3519553072626%"></div>
<pre>
    let F0 := match goal with |- NaturalTransformation ?F ?G =&gt; constr:(F) end in
    let G0 := match goal with |- NaturalTransformation ?F ?G =&gt; constr:(G) end in
    refine (Build_NaturalTransformation
              F0 G0
              (fun a' : A =&gt; (fun f : morphism A a a' =&gt; morphism_of F f Fa))
              _
           ).</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 195
Time: 0.001s">
<div class="time" style="width: 0.5586592178771%"></div>
<pre>
    simpl.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 196
Time: 0.014s">
<div class="time" style="width: 7.8212290502793%"></div>
<pre>
    abstract (
        repeat first [ reflexivity
                     | intro
                     | apply path_forall
                     | progress rewrite ?composition_of, ?identity_of ]
      ).</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 202
Time: 0.024s">
<div class="time" style="width: 13.40782122905%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 203
Time: 0.002s">
<div class="time" style="width: 1.1173184357542%"></div>
<pre>

  Global Instance coyoneda_lemma `{Funext} A
  : IsIsomorphism (coyoneda_natural_transformation A).</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 206
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 207
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    eapply isisomorphism_natural_transformation.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 208
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    simpl.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 209
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    intro F.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 210
Time: 0.002s">
<div class="time" style="width: 1.1173184357542%"></div>
<pre>
    eapply isisomorphism_natural_transformation.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 211
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    intro a.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 212
Time: 0.001s">
<div class="time" style="width: 0.5586592178771%"></div>
<pre>
    simpl.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 213
Time: 0.073s">
<div class="time" style="width: 40.782122905028%"></div>
<pre>
    exists (coyoneda_lemma_morphism_inverse F a);
      simpl in *;
    abstract (
        repeat (intro || apply path_forall || path_natural_transformation);
        simpl in *;
          solve [ simpl rewrite &lt;- (fun c d m =&gt; ap10 (commutes x c d m));
                  rewrite ?right_identity, ?left_identity;
                  reflexivity
                | rewrite identity_of;
                  reflexivity ]
      ).</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 224
Time: 0.041s">
<div class="time" style="width: 22.905027932961%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 225
Time: 0.027s">
<div class="time" style="width: 15.083798882682%"></div>
<pre>
End coyoneda_lemma.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 226
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Section yoneda_lemma.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 228
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  (** There is a contravariant version of Yoneda's lemma which
      concerns contravariant functors from [A] to [Set]. This version
      involves the contravariant hom-functor

      [hₐ = Hom(─, A)],

      which sends [x] to the hom-set [Hom(x, a)]. Given an arbitrary
      contravariant functor [G] from [A] to [Set], Yoneda's lemma
      asserts that

      [Nat(hₐ, G) ≅ G(a)]. *)

 </pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 241
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Section functor.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 241
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    Context `{Funext}.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 242
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

    Variable A : PreCategory.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 244
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    (** Let [F] be an arbitrary functor from [A] to [Set]. Then Yoneda's
      lemma says that: *)
    (*Variable F : Functor A (@set_cat fs).*)
    (** For each object [a] of [A], *)
    (*Variable a : A.*)
    (** the natural transformations from [hᵃ] to [F] are in one-to-one
      correspondence with the elements of [F(a)]. That is,

      [Nat(hᵃ, F) ≅ F(a)].

      Moreover this isomorphism is natural in [a] and [F] when both
      sides are regarded as functors from [Setᴬ × A] to
      [Set].

      Given a natural transformation [Φ] from [hᵃ] to [F], the
      corresponding element of [F(a)] is [u = Φₐ(idₐ)]. *)

    (* Definition yoneda_lemma_morphism A (G : object (A^op -&gt; set_cat)) (a : A)
  : morphism set_cat
             (BuildhSet
                (morphism (A^op -&gt; set_cat) (yoneda A a) G)
                _)
             (G a)
    := fun phi =&gt; phi a 1%morphism.*)

   </pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 270
Time: 0.004s">
<div class="time" style="width: 2.2346368715084%"></div>
<pre>Definition yoneda_functor
    : Functor (A^op -&gt; set_cat)
              (A^op -&gt; set_cat)
      := coyoneda_functor A^op.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 273
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  End functor.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 274
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  Context `{Funext}.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 276
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  Variable A : PreCategory.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 278
Time: 0.006s">
<div class="time" style="width: 3.3519553072626%"></div>
<pre>

  Definition yoneda_natural_transformation
  : morphism (_ -&gt; _)
             1
             (yoneda_functor A)
    := @morphism_inverse _ _ _ _ (coyoneda_lemma A^op).</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 284
Time: 0.004s">
<div class="time" style="width: 2.2346368715084%"></div>
<pre>

  Global Instance yoneda_lemma
  : IsIsomorphism yoneda_natural_transformation
    := @isisomorphism_inverse _ _ _ _ (coyoneda_lemma A^op).</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 288
Time: 0.001s">
<div class="time" style="width: 0.5586592178771%"></div>
<pre>
End yoneda_lemma.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 289
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** ** The Yoneda embedding

    An important special case of Yoneda's lemma is when the functor
    [F] from [A] to [Set] is another hom-functor [hᵇ]. In this case,
    the covariant version of Yoneda's lemma states that

    [Nat(hᵃ, hᵇ) ≅ Hom(b, a)].

    That is, natural transformations between hom-functors are in
    one-to-one correspondence with morphisms (in the reverse
    direction) between the associated objects. Given a morphism [f : b
    → a] the associated natural transformation is denoted [Hom(f, ─)].

    Mapping each object [a] in [A] to its associated hom-functor [hᵃ=
    Hom(a, ─)] and each morphism [f : B → A] to the corresponding
    natural transformation [Hom(f, ─)] determines a contravariant
    functor [h⁻] from [A] to [Setᴬ], the functor category of all
    (covariant) functors from [A] to [Set]. One can interpret [h⁻] as
    a covariant functor:

    [h⁻ : Aᵒᵖ → Setᴬ].

    The meaning of Yoneda's lemma in this setting is that the functor
    [h⁻] is fully faithful, and therefore gives an embedding of [Aᵒᵖ]
    in the category of functors to [Set]. The collection of all
    functors {[hᵃ], [a] in [A]} is a subcategory of [Set̂ᴬ]. Therefore,
    Yoneda embedding implies that the category [Aᵒᵖ] is isomorphic to
    the category {[hᵃ], [a] in [A]}.

    The contravariant version of Yoneda's lemma states that

    [Nat(hₐ, h_b) ≅ Hom(a, b)].

    Therefore, [h₋] gives rise to a covariant functor from [A] to the
    category of contravariant functors to [Set]:

    [h₋ : A → Set⁽⁽ᴬ⁾ᵒᵖ⁾].

    Yoneda's lemma then states that any locally small category [A] can
    be embedded in the category of contravariant functors from [A] to
    [Set] via [h₋]. This is called the Yoneda embedding. *)

</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 332
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Section FullyFaithful.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 332
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Context `{Funext}.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 333
Time: 0.001s">
<div class="time" style="width: 0.5586592178771%"></div>
<pre>

  Definition coyoneda_embedding (A : PreCategory) : IsFullyFaithful (coyoneda A).</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 335
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 336
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    intros a b.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 337
Time: 0.006s">
<div class="time" style="width: 3.3519553072626%"></div>
<pre>
    pose proof (@isisomorphism_inverse
                  _ _ _ _
                  (@isisomorphism_components_of
                     _ _ _ _ _ _
                     (@isisomorphism_components_of
                        _ _ _ _ _ _
                        (@coyoneda_lemma _ A)
                        (@coyoneda _ A b))
                     a)) as H'.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 346
Time: 0.004s">
<div class="time" style="width: 2.2346368715084%"></div>
<pre>
    simpl in *.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 347
Time: 0.001s">
<div class="time" style="width: 0.5586592178771%"></div>
<pre>
    unfold coyoneda_lemma_morphism_inverse in *; simpl in *.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 348
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    unfold Functors.inverse_object_of_morphism_of in *; simpl in *.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 349
Time: 0.006s">
<div class="time" style="width: 3.3519553072626%"></div>
<pre>
    let m := match type of H' with IsIsomorphism ?m =&gt; constr:(m) end in
    apply isisomorphism_set_cat_natural_transformation_paths with (T1 := m).</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 351
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 352
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> simpl.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 352
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      clear H'.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 353
Time: 0.002s">
<div class="time" style="width: 1.1173184357542%"></div>
<pre>
      intros; apply path_forall;
      intro;
      rewrite left_identity, right_identity;
      reflexivity.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 357
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 358
Time: 0.014s">
<div class="time" style="width: 7.8212290502793%"></div>
<pre> destruct H' as [m' H0' H1'].</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 358
Time: 0.004s">
<div class="time" style="width: 2.2346368715084%"></div>
<pre>
      (exists m').</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 359
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      +</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 360
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact H0'.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 360
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      +</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 361
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact H1'.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 361
Time: 0.05s">
<div class="time" style="width: 27.932960893855%"></div>
<pre>
  Qed.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 362
Time: 0.001s">
<div class="time" style="width: 0.5586592178771%"></div>
<pre>

  Definition yoneda_embedding (A : PreCategory) : IsFullyFaithful (yoneda A).</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 364
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 365
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    intros a b.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 366
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    pose proof (@coyoneda_embedding A^op a b) as CYE.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 367
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    unfold yoneda.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 368
Time: 0.01s">
<div class="time" style="width: 5.5865921787709%"></div>
<pre>
    let T := type of CYE in
    let T' := (eval simpl in T) in
    pose proof ((fun x : T =&gt; (x : T')) CYE) as CYE'.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 371
Time: 0.003s">
<div class="time" style="width: 1.6759776536313%"></div>
<pre>
    let G := match goal with |- ?G =&gt; constr:(G) end in
    let G' := (eval simpl in G) in
    exact ((fun x : G' =&gt; (x : G)) CYE').</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 374
Time: 0.014s">
<div class="time" style="width: 7.8212290502793%"></div>
<pre>
  Qed.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 375
Time: 0.011s">
<div class="time" style="width: 6.145251396648%"></div>
<pre>
End FullyFaithful.</pre>
</div>
<div class="code" title="File: Yoneda.v
Line: 377
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

</pre>
</div>
</body>
</html>


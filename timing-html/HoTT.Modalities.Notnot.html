<html>
<head>
<title>Notnot.v</title>
<style>
.time {
  background-color: #ffaaaa;
  height: 100%;
  z-index: -1;
  position: absolute;
}
.code {
  z-index: 0;
  position: relative;
  border-style: solid;
  border-color: transparent;
  border-width: 1px;
}
.code:hover {
  border-style: solid;
  border-color: black;
  border-width: 1px;
}
pre {
  margin: 1px;
}
</style>
</head>
<body>
<h1>Timings for Notnot.v</h1>

<div class="code" title="File: Notnot.v
Line: 1
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>(* -*- mode: coq; mode: visual-line -*- *)</pre>
</div>
<div class="code" title="File: Notnot.v
Line: 1
Time: 0.049s">
<div class="time" style="width: 70%"></div>
<pre>Require Import HoTT.Basics HoTT.Types.</pre>
</div>
<div class="code" title="File: Notnot.v
Line: 1
Time: 0.022s">
<div class="time" style="width: 31.428571428571%"></div>
<pre>
Require Import Modality.</pre>
</div>
<div class="code" title="File: Notnot.v
Line: 2
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Local Open Scope path_scope.</pre>
</div>
<div class="code" title="File: Notnot.v
Line: 4
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Local Open Scope equiv_scope.</pre>
</div>
<div class="code" title="File: Notnot.v
Line: 5
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** * The double negation modality *)

(** This is Exercise 7.12 in the book.  Note that it is (apparently) *not* accessible unless we assume propositional resizing. *)

(** We are defining only one modality, but it depends on funext.  Therefore, we let the family of modalities be the type [Funext].  However, since there is a coercion [O_reflector] from [Modality] to [Funclass], we don't want to simply *define* [Modality] to be [Funext], or else we could start applying [Funext] hypotheses to types and having it act as double negation.

Instead, we define a [Record] wrapper around it.  This is the recommended best practice for all modules (with one exception, see Truncations.v).  The constructor of the record should generally be a short name (here [Notnot]) that makes sense as the reflector. *)

</pre>
</div>
<div class="code" title="File: Notnot.v
Line: 14
Time: 0.001s">
<div class="time" style="width: 1.4285714285714%"></div>
<pre>Record Notnot_Modality := Notnot { unNotnot : Funext }.</pre>
</div>
<div class="code" title="File: Notnot.v
Line: 14
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Module Notnot_Easy_Modalities &lt;: EasyModalities.</pre>
</div>
<div class="code" title="File: Notnot.v
Line: 16
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  Definition Modality : Type2@{u a}
    := Notnot_Modality.</pre>
</div>
<div class="code" title="File: Notnot.v
Line: 19
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  Definition O_reflector : Modality@{u a} -&gt; Type@{i} -&gt; Type@{i}
    (** We call [not] explicitly with universe annotations so that [O_reflector] has the right number of universe parameters to satisfy the module type. *)
    := fun O X =&gt; not@{i i i} (not@{i i i} X).</pre>
</div>
<div class="code" title="File: Notnot.v
Line: 23
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  Definition to (O : Modality@{u a}) (T : Type@{i})
  : T -&gt; O_reflector@{u a i} O T
  := fun x nx =&gt; nx x.</pre>
</div>
<div class="code" title="File: Notnot.v
Line: 27
Time: 0.001s">
<div class="time" style="width: 1.4285714285714%"></div>
<pre>

  Definition O_indO (O : Modality@{u a}) (A : Type@{i})
             (B : O_reflector@{u a i} O A -&gt; Type@{j})
  : (forall a : A, O_reflector@{u a j} O (B (to O A a))) -&gt;
    forall z : O_reflector@{u a i} O A, O_reflector@{u a j} O (B z).</pre>
</div>
<div class="code" title="File: Notnot.v
Line: 32
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Notnot.v
Line: 33
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    intros f z nBz.</pre>
</div>
<div class="code" title="File: Notnot.v
Line: 34
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    pose (unNotnot O).</pre>
</div>
<div class="code" title="File: Notnot.v
Line: 35
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>          (** Access the [Funext] hypothesis *)
    (** The goal is [Empty@{j}], whereas [z] has codomain [Empty@{i}].  Thus, simply applying [z] would collapse the universe parameters undesirably, so we first alter the goal to be [Empty@{i}]. *)
   </pre>
</div>
<div class="code" title="File: Notnot.v
Line: 37
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>cut (Empty@{i}); [ intros [] | ].</pre>
</div>
<div class="code" title="File: Notnot.v
Line: 37
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply z; intros a.</pre>
</div>
<div class="code" title="File: Notnot.v
Line: 38
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    (** Now the goal is [Empty@{i}], whereas [f] has codomain [Empty@{j}]. *)
   </pre>
</div>
<div class="code" title="File: Notnot.v
Line: 40
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>cut (Empty@{j}); [ intros [] | ].</pre>
</div>
<div class="code" title="File: Notnot.v
Line: 40
Time: 0.025s">
<div class="time" style="width: 35.714285714286%"></div>
<pre>
    exact (f a (transport (fun x =&gt; not@{j j j} (B x))
                          (path_ishprop _ _)
                          nBz)).</pre>
</div>
<div class="code" title="File: Notnot.v
Line: 43
Time: 0.001s">
<div class="time" style="width: 1.4285714285714%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Notnot.v
Line: 44
Time: 0.002s">
<div class="time" style="width: 2.8571428571429%"></div>
<pre>

  Definition O_indO_beta (O : Modality@{u a}) (A : Type@{i})
             (B : O_reflector@{u a i} O A -&gt; Type@{j})
             (f : forall a, O_reflector@{u a j} O (B (to O A a))) (a:A)
  : O_indO O A B f (to O A a) = f a.</pre>
</div>
<div class="code" title="File: Notnot.v
Line: 49
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Notnot.v
Line: 50
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    pose (unNotnot O).</pre>
</div>
<div class="code" title="File: Notnot.v
Line: 51
Time: 0.023s">
<div class="time" style="width: 32.857142857143%"></div>
<pre>
    apply path_ishprop.</pre>
</div>
<div class="code" title="File: Notnot.v
Line: 52
Time: 0.001s">
<div class="time" style="width: 1.4285714285714%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Notnot.v
Line: 53
Time: 0.001s">
<div class="time" style="width: 1.4285714285714%"></div>
<pre>

  Definition minO_pathsO (O : Modality@{u a}) (A : Type@{i})
             (z z' : O_reflector@{u a i} O A)
  : IsEquiv@{i i} (to@{u a i} O (z = z')).</pre>
</div>
<div class="code" title="File: Notnot.v
Line: 57
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Notnot.v
Line: 58
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    pose (unNotnot O).</pre>
</div>
<div class="code" title="File: Notnot.v
Line: 59
Time: 0.07s">
<div class="time" style="width: 100%"></div>
<pre>
    refine (isequiv_iff_hprop _ _).</pre>
</div>
<div class="code" title="File: Notnot.v
Line: 60
Time: 0.023s">
<div class="time" style="width: 32.857142857143%"></div>
<pre>
    intros; apply path_ishprop.</pre>
</div>
<div class="code" title="File: Notnot.v
Line: 61
Time: 0.001s">
<div class="time" style="width: 1.4285714285714%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Notnot.v
Line: 62
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

End Notnot_Easy_Modalities.</pre>
</div>
<div class="code" title="File: Notnot.v
Line: 64
Time: 0.002s">
<div class="time" style="width: 2.8571428571429%"></div>
<pre>

Module Notnot_Modalities &lt;: Modalities := EasyModalities_to_Modalities Notnot_Easy_Modalities.</pre>
</div>
<div class="code" title="File: Notnot.v
Line: 66
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** After we define any family of modalities or reflective subuniverses, we give a corresponding name to the theory module, generally by postfixing the above-mentioned record constructor with [M] (for "module").  This way, one can either [Import] the theory module (here [NotnotM]) and get access to all the modality functions for the modalities in question, or not import it and access them qualified as [NotnotM.function_name]. *)</pre>
</div>
<div class="code" title="File: Notnot.v
Line: 68
Time: 0.015s">
<div class="time" style="width: 21.428571428571%"></div>
<pre>Module NotNotM := Modalities_Theory Notnot_Modalities.</pre>
</div>
<div class="code" title="File: Notnot.v
Line: 68
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Export NotNotM.Coercions.</pre>
</div>
<div class="code" title="File: Notnot.v
Line: 69
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Export NotNotM.RSU.Coercions.</pre>
</div>
<div class="code" title="File: Notnot.v
Line: 70
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Finally, we declare a coercion allowing us to use elements of the record wrapper as modalities. *)</pre>
</div>
<div class="code" title="File: Notnot.v
Line: 72
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Coercion Notnot_Modalities_to_Modalities := idmap
  : Notnot_Modality -&gt; Notnot_Modalities.Modality.</pre>
</div>
<div class="code" title="File: Notnot.v
Line: 74
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

</pre>
</div>
</body>
</html>

